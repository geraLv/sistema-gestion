# Inventario de endpoints (Paso 1)

Tabla con los endpoints y detalles extraídos de `sistema/fetch` y `sistema/**/fetch`.

| Archivo                                       |                          Ruta (aprox) | Método / entrada              | Parámetros recibidos                                                              | Tablas afectadas / consultadas                                           | Respuesta                                          |
| --------------------------------------------- | ------------------------------------: | ----------------------------- | --------------------------------------------------------------------------------- | ------------------------------------------------------------------------ | -------------------------------------------------- |
| `sistema/fetch/login.php`                     |                     `fetch/login.php` | POST (`usuario`,`password`)   | `usuario`, `password`                                                             | `user`                                                                   | JSON del usuario (json_encode)                     |
| `sistema/fetch/listarClientes.php`            |            `fetch/listarClientes.php` | GET                           | -                                                                                 | `cliente`, `localidad`                                                   | JSON (array)                                       |
| `sistema/fetch/registrarCliente.php`          |          `fetch/registrarCliente.php` | POST                          | `appynom`,`dni`,`direccion`,`telefono`,`selectLocalidades`, optional `idcliente`  | `cliente` (INSERT/UPDATE)                                                | Texto: `ok` / `modificado`                         |
| `sistema/fetch/registrarSolicitud.php`        |        `fetch/registrarSolicitud.php` | POST                          | varios (`selectCliente`,`idproducto`,`monto`,`selectCuotas`,`nroSolicitud`, etc.) | `solicitud`, `cuotas` (INSERT/UPDATE)                                    | Texto: `ok` / `modificacion` / `existente`         |
| `sistema/fetch/pagarCuota.php`                |                `fetch/pagarCuota.php` | RAW body (`php://input`) (id) | id cuota (body)                                                                   | `cuotas`, `solicitud` (SELECT, UPDATE)                                   | Texto: porcentaje actualizado (echo)               |
| `sistema/fetch/listarCuotas.php`              |              `fetch/listarCuotas.php` | RAW body (idsolicitud)        | `idsolicitud` (body)                                                              | `cuotas`                                                                 | JSON (array)                                       |
| `sistema/fetch/get_cuotas.php`                |                `fetch/get_cuotas.php` | GET (`id`)                    | `id` (query)                                                                      | `cuotas`                                                                 | JSON (array)                                       |
| `sistema/fetch/editarSolicitud.php`           |           `fetch/editarSolicitud.php` | RAW body (idsolicitud)        | `idsolicitud` (body)                                                              | `solicitud`, `cliente`, `producto`, `vendedor`                           | JSON (array)                                       |
| `sistema/fetch/editarCliente.php`             |             `fetch/editarCliente.php` | RAW body (idcliente)          | `idcliente` (body)                                                                | `cliente`, `localidad`                                                   | JSON (array)                                       |
| `sistema/fetch/consultarAdelanto.php`         |         `fetch/consultarAdelanto.php` | POST                          | `id` / `idsolicitud`                                                              | `adelanto` (SUM)                                                         | Texto: valor (echo)                                |
| `sistema/fetch/cargarAdelanto.php`            |            `fetch/cargarAdelanto.php` | POST                          | `idsolicitud`, `adelantoimporte`                                                  | `adelanto` (INSERT)                                                      | Texto: `ok`                                        |
| `sistema/fetch/adicionarCuotas.php`           |           `fetch/adicionarCuotas.php` | POST                          | `idsolicitud`, `cantCuotas`                                                       | `solicitud` (SELECT, UPDATE), `cuotas` (INSERT)                          | Texto: `ok`                                        |
| `sistema/fetch/modificarObservaciones.php`    |    `fetch/modificarObservaciones.php` | POST                          | `nrosolicitud`, `observaciones`                                                   | `solicitud` (UPDATE)                                                     | (sin salida explícita)                             |
| `sistema/fetch/modificaImporteCuotas.php`     |     `fetch/modificaImporteCuotas.php` | POST                          | `id`,`importe`                                                                    | (espera actualizar `cuotas`)                                             | Echo del id recibido (script incompleto)           |
| `sistema/fetch/monitor.php`                   |                   `fetch/monitor.php` | POST / GET                    | `solicitud`                                                                       | `solicitud`, `cliente`, `producto`, `vendedor`, subconsultas en `cuotas` | JSON (array)                                       |
| `sistema/fetch/solicitudes_pagas.php`         |         `fetch/solicitudes_pagas.php` | (sin input)                   | -                                                                                 | `cuotas`, `solicitud`, `cliente`, `producto`                             | JSON (array)                                       |
| `sistema/fetch/solicitudes_impagas.php`       |       `fetch/solicitudes_impagas.php` | (sin input)                   | -                                                                                 | `cuotas`, `solicitud`, `cliente`, `producto`                             | JSON (array)                                       |
| `sistema/fetch/solicitudes_bajas.php`         |         `fetch/solicitudes_bajas.php` | (sin input)                   | -                                                                                 | `cuotas`, `solicitud`, `cliente`, `producto`                             | JSON (array)                                       |
| `sistema/fetch/localidades.php`               |               `fetch/localidades.php` | (sin input)                   | -                                                                                 | `localidad`                                                              | JSON (array)                                       |
| `sistema/fetch/listarVendedor.php`            |            `fetch/listarVendedor.php` | (sin input)                   | -                                                                                 | `vendedor`                                                               | JSON (array)                                       |
| `sistema/fetch/listarProductos.php`           |           `fetch/listarProductos.php` | (sin input)                   | -                                                                                 | `producto`                                                               | JSON (array)                                       |
| `sistema/fetch/listarSolicitudes.php`         |         `fetch/listarSolicitudes.php` | (sin input)                   | -                                                                                 | `solicitud`, `cliente`, `producto`, `vendedor`                           | JSON (array)                                       |
| `sistema/fetch/consultarAdelanto.php`         |         `fetch/consultarAdelanto.php` | POST                          | `id`                                                                              | `adelanto`                                                               | Texto                                              |
| `sistema/fetch/cargarCboSolicitudCliente.php` | `fetch/cargarCboSolicitudCliente.php` | (sin input)                   | -                                                                                 | `solicitud`, `cliente`, `producto`                                       | JSON para select2 (`results` en algunas variantes) |
| `sistema/cuotas/fetch/cambiarFechas.php`      |      `cuotas/fetch/cambiarFechas.php` | POST                          | `relasolicitud`, `nuevaFecha`                                                     | `cuotas` (SELECT, UPDATE)                                                | JSON {status,msg}                                  |

Notas:

- Muchos endpoints usan `php://input` para recibir un único ID en el body (POST raw). Algunos usan `$_POST` o `$_GET`.
- Respuestas mixtas: `json_encode` para arrays/objetos; `echo` con texto para confirmaciones simples.
- Conexión a BD en PHP usa `PDO` (archivo `fetch/conexion.php` y `cuotas/fetch/conexionPDO.php`) o `mysqli` en algunos archivos.
- Para migración a TypeScript/Supabase: las consultas SELECT/INSERT/UPDATE listadas arriba se deben mapear a las tablas equivalentes en Supabase y a llamadas con `supabase.from(...).select()` / `.insert()` / `.update()`.

Siguientes pasos recomendados:

- Generar CSV/MD más detallado con lista de parámetros (tipos) para cada endpoint (si quieres lo hago ahora).
- Elegir 1 módulo piloto para migrar (p. ej. `clientes` o `solicitudes`) y crear rutas espejo en TypeScript.
